{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Formik, Field, FieldArray } from \"formik\";\nimport TextField from \"./TextField\";\nimport Select from \"./Select\";\nimport Router, { useRouter } from 'next/router';\nimport Button from \"./Button\";\nimport patientService from \"../services/patientService\";\nimport { ArrowRightIcon } from \"@heroicons/react/outline\";\n\nvar HistoryForm = function HistoryForm(props) {\n  var router = useRouter();\n  return /*#__PURE__*/_jsx(Formik, {\n    initialValues: {\n      family: \"\",\n      ethnicity: \"\",\n      cancerDX: \"\",\n      cancerDXType: \"\",\n      cancerDXAge: \"\",\n      relations: [{\n        relationship: '',\n        cancer: '',\n        age: ''\n      }]\n    },\n    onSubmit: function onSubmit(values, _ref) {\n      var setSubmitting = _ref.setSubmitting;\n      patientService.CreatePatient(values, props.user_id, props.token).then(function (patient) {\n        console.log(patient);\n        router.push('/dashboard');\n      })[\"catch\"](function () {\n        return Router.reload();\n      });\n    },\n    validate: function validate(values) {\n      var errors = {};\n\n      if (!values.family) {\n        errors.family = \"This field is required!\";\n      }\n\n      if (!values.ethnicity) {\n        errors.ethnicity = \"This field is required!\";\n      }\n\n      if (!values.cancerDX) {\n        errors.cancerDX = \"This field is required!\";\n      }\n\n      if (values.family == \"Yes\") {\n        for (var i = 0; i < values.relations.length; i++) {\n          if (!values.relations[i][\"relationship\"]) {\n            errors.relations = \"All relationship fields are required!\";\n          }\n        }\n      }\n\n      return errors;\n    },\n    children: function children(_ref2) {\n      var values = _ref2.values,\n          errors = _ref2.errors,\n          touched = _ref2.touched,\n          setFieldValue = _ref2.setFieldValue,\n          handleChange = _ref2.handleChange,\n          handleBlur = _ref2.handleBlur,\n          handleSubmit = _ref2.handleSubmit,\n          isSubmitting = _ref2.isSubmitting;\n      return /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"grid grid-cols-2 gap-5\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-1\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"Have you been diagnosed with cancer in the past?\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"h-16\",\n              children: [/*#__PURE__*/_jsx(Field, {\n                errors: errors.cancerDX && touched.cancerDX && errors.cancerDX,\n                name: \"cancerDX\",\n                placeholder: \"Select\",\n                type: \"input\",\n                changeValue: function changeValue(val) {\n                  setFieldValue('cancerDX', val);\n\n                  if (val == \"No\") {\n                    setFieldValue('cancerDXType', '');\n                    setFieldValue('cancerDXAge', '');\n                  }\n                },\n                choices: [{\n                  choice: \"Yes\",\n                  value: \"Yes\",\n                  color: \"green-600\"\n                }, {\n                  choice: \"No\",\n                  value: \"No\",\n                  color: \"red-600\"\n                }],\n                as: Select\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mt-1 text-xs m-px text-red-500\",\n                children: errors.cancerDX && touched.cancerDX && errors.cancerDX\n              })]\n            })]\n          }), values.cancerDX == \"Yes\" ? /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-1\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"What type of cancer were you diagnosed with?\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"h-16\",\n              children: [/*#__PURE__*/_jsx(Field, {\n                errors: errors.cancerDXType && touched.cancerDXType && errors.cancerDXType,\n                name: \"cancerDXType\",\n                placeholder: \"Cancer Type\",\n                type: \"input\",\n                as: TextField\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mt-1 text-xs m-px text-red-500\",\n                children: errors.cancerDXType && touched.cancerDXType && errors.cancerDXType\n              })]\n            })]\n          }) : '', values.cancerDX == \"Yes\" ? /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-1\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"At what age were you diagnosed?\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"h-16\",\n              children: [/*#__PURE__*/_jsx(Field, {\n                errors: errors.cancerDXAge && touched.cancerDXAge && errors.cancerDXAge,\n                name: \"cancerDXAge\",\n                placeholder: \"Age of Diagnosis\",\n                type: \"input\",\n                as: TextField\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mt-1 text-xs m-px text-red-500\",\n                children: errors.cancerDXAge && touched.cancerDXAge && errors.cancerDXAge\n              })]\n            })]\n          }) : '', /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-1\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"What is your ethnicity?\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"h-16\",\n              children: [/*#__PURE__*/_jsx(Field, {\n                errors: errors.ethnicity && touched.ethnicity && errors.ethnicity,\n                name: \"ethnicity\",\n                placeholder: \"Ethnicity\",\n                type: \"input\",\n                as: TextField\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mt-1 text-xs m-px text-red-500\",\n                children: errors.ethnicity && touched.ethnicity && errors.ethnicity\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-span-2\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"mb-1\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"Does any of your intermediate family have a cancer diagnosis?\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"h-16\",\n              children: [/*#__PURE__*/_jsx(Field, {\n                errors: errors.family && touched.family && errors.family,\n                name: \"family\",\n                placeholder: \"Select\",\n                type: \"input\",\n                changeValue: function changeValue(val) {\n                  setFieldValue('family', val);\n\n                  if (val == \"No\") {\n                    setFieldValue('relations', [{\n                      relationship: '',\n                      cancer: '',\n                      age: ''\n                    }]);\n                  }\n                },\n                choices: [{\n                  choice: \"Yes\",\n                  value: \"Yes\",\n                  color: \"green-600\"\n                }, {\n                  choice: \"No\",\n                  value: \"No\",\n                  color: \"red-600\"\n                }],\n                as: Select\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"mt-1 text-xs m-px text-red-500\",\n                children: errors.family && touched.family && errors.family\n              })]\n            })]\n          }), values.family == \"Yes\" ? /*#__PURE__*/_jsx(FieldArray, {\n            name: \"relations\",\n            render: function render(arrayHelpers) {\n              return /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-span-2\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  children: [values.relations ? values.relations.map(function (relation, index) {\n                    return /*#__PURE__*/_jsxs(\"div\", {\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"mb-1\",\n                        children: /*#__PURE__*/_jsxs(\"strong\", {\n                          children: [\"Family Member \", index + 1]\n                        })\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"grid grid-cols-8 gap-2\",\n                        children: [/*#__PURE__*/_jsxs(\"div\", {\n                          className: \"col-span-6 row-span-2\",\n                          children: [/*#__PURE__*/_jsx(\"div\", {\n                            className: \"h-16\",\n                            children: /*#__PURE__*/_jsx(Field, {\n                              placeholder: \"Relationship\",\n                              name: \"relations[\".concat(index, \"].relationship\"),\n                              as: TextField\n                            })\n                          }), /*#__PURE__*/_jsx(\"div\", {\n                            className: \"h-16\",\n                            children: /*#__PURE__*/_jsx(Field, {\n                              placeholder: \"Cancer Type\",\n                              name: \"relations.\".concat(index, \".cancer\"),\n                              as: TextField\n                            })\n                          }), /*#__PURE__*/_jsx(\"div\", {\n                            className: \"h-16\",\n                            children: /*#__PURE__*/_jsx(Field, {\n                              placeholder: \"Age of Diagnosis\",\n                              name: \"relations.\".concat(index, \".age\"),\n                              as: TextField\n                            })\n                          })]\n                        }), /*#__PURE__*/_jsx(\"div\", {\n                          className: \"mb-3 flex justify-center col-span-2\",\n                          children: /*#__PURE__*/_jsx(Button, {\n                            padd: \"1\",\n                            type: \"button\",\n                            color: \"red-500\",\n                            onClick: function onClick() {\n                              if (values.relations.length != 1) {\n                                arrayHelpers.remove(index);\n                              }\n                            },\n                            children: \"Remove\"\n                          })\n                        })]\n                      })]\n                    }, index);\n                  }) : /*#__PURE__*/_jsx(\"div\", {}), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"flex justify-center\",\n                    children: /*#__PURE__*/_jsx(Button, {\n                      padd: \"1\",\n                      color: \"blue-500\",\n                      type: \"button\",\n                      onClick: function onClick() {\n                        return arrayHelpers.push({\n                          relationship: '',\n                          cancer: '',\n                          age: ''\n                        });\n                      },\n                      children: \"Add\"\n                    })\n                  })]\n                })\n              });\n            }\n          }) : /*#__PURE__*/_jsx(\"div\", {}), /*#__PURE__*/_jsx(\"div\", {\n            className: \"text-xs m-px text-red-500\",\n            children: errors.relations && touched.relations && errors.relations\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"w-full grid mt-5\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"flex justify-center\",\n            children: /*#__PURE__*/_jsx(Button, {\n              color: \"green-300\",\n              disabled: isSubmitting,\n              type: \"submit\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"flex items-center\",\n                children: /*#__PURE__*/_jsx(ArrowRightIcon, {\n                  className: \"h-5 w-5\"\n                })\n              })\n            })\n          })\n        })]\n      });\n    }\n  });\n};\n\nexport default HistoryForm;","map":null,"metadata":{},"sourceType":"module"}