{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Card from \"../components/Card\";\nimport LogInForm from \"../components/LoginForm\";\nimport NavBar from \"../components/NavBar\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from \"axios\";\n\nconst LogIn = props => {\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(NavBar, {\n      userData: props.userData\n    }), /*#__PURE__*/_jsx(\"div\", {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"p-7\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"grid grid-cols-3 gap-4\",\n          children: [/*#__PURE__*/_jsx(\"div\", {}), /*#__PURE__*/_jsxs(Card, {\n            title: \"Log In\",\n            titleAlign: \"center\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"text-center text-black\",\n              children: \"Take control of your health!\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mt-10\",\n              children: /*#__PURE__*/_jsx(LogInForm, {})\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {})]\n        })\n      })\n    })]\n  });\n};\n\nexport async function getServerSideProps(context) {\n  const cookies = context.req.headers.cookie;\n\n  if (cookies == undefined) {\n    return {\n      props: {\n        userData: {}\n      }\n    };\n  }\n\n  console.log(cookies);\n  var tok = cookies.substring(6);\n  var data = \"\";\n  console.log(tok);\n\n  if (tok != undefined && tok != \"undefined\") {\n    console.log(tok !== undefined);\n    console.log(tok);\n    var decoded = jwt_decode(tok);\n    var id = decoded.user_id;\n    console.log(\"I'm here\");\n    await axios.get(`https://api.demo.federico.codes/users/${id}`, {\n      headers: {\n        'Authorization': `${tok}`\n      }\n    }).then(user => {\n      data = user.data;\n      console.log(data);\n    }).catch(e => console.log(e));\n  } else {\n    return {\n      props: {\n        userData: {}\n      }\n    };\n  }\n\n  return {\n    redirect: {\n      destination: \"/dashboard\",\n      permanent: false\n    }\n  };\n}\nexport default LogIn;","map":null,"metadata":{},"sourceType":"module"}